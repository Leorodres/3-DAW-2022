<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excluir Aluno JS</title>
    <script>
        function enviarForm() {
                let xmlHttp = new XMLHttpRequest();
                
                xmlHttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("msg").innerHTML = this.responseText;
                    }
                }

                xmlHttp.open("GET", "http://localhost/3daw2022.2leonardo/JSCrud/CRUD%20JS/ex11_AletarAlunoJS?matricula=" + pMat);
                xmlHttp.send();

                location.reload();
            }
        
        function buscarAluno(matricula) {
            let xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() {
                console.log("mudou status: " + this.readyState);
                if (this.readyState == 4 && this.status == 200) {
                    let obj = JSON.parse(this.responseText);
                    document.getElementById("nomeAlt").value = obj.nome;
                    document.getElementById("matAlt").value = obj.matricula;
                    document.getElementById("emailAlt").value = obj.email;
                    let formAlt = document.getElementById("formAlterar");
                    formAlt.style.display = "block";
                }
            }
            xmlHttp.open("GET", "http://localhost/3dawmanha/ex12_buscarAluno.php?mat=" + matricula);
            xmlHttp.send();
        }

    </script>
</head>
<body>
    <ul>
        <li><a href="ex10IncluirAlunoJS.html">Incluir Aluno</a></li>
        <li><a href="ex11_AlterarIncluirAlunoJS.html">Alterar Aluno</a></li>
        <li><a href="ex11_ExcluirAlunoJS.html">Excluir Aluno</a></li>
        <li><a href="ex11_ListarAlunoJS.html">Listar Aluno</a></li>
    </ul>
    <form id="formExcluir">
        <h2>Digite A Matricula que ir√° alterar</h2>
      <fieldset>
          <label>Matricula:</label>
          <input type = "text" name = "matricula" id = "matricula"><br><br>
          <input type = "button" name = "envio" value="Enviar" 
            onclick="enviarForm();">
        </fieldset>
    </form>
    <form id="formAlterar" style="display:none">
        <fieldset>
            <label>Nome:</label>
            <input type = "text" name = "nome" id = "nomeAlt" value=""><br><br>
            <label>Matricula:</label>
            <input type = "text" name = "matricula" id = "matAlt" value=""><br><br>
            <label>Email:</label>
            <input type = "text" name = "email" id = "emailAlt" value=""><br><br>
            <label>CPF:</label>
            <input type = "text" name = "cpf" id = "cpfAlt" value=""><br><br>
            <input type = "button" name = "envio" value="Enviar" 
              onclick="enviarForm();">
          </fieldset>
      </form>
</body>
</html>